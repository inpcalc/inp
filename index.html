<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Calcul de moyenne</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .matiere {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            width: 350px;
        }
        button {
            margin-top: 5px;
        }
    </style>
</head>
<body>

<h1>Calcul de moyenne</h1>

<!-- MATHS -->
<div class="matiere">
    <h3>Maths (coef 7)</h3>

    <strong>Contrôles</strong>
    <div id="maths-controles">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('maths-controles')">+</button>

    <br><br>

    <strong>Tests</strong>
    <div id="maths-tests">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('maths-tests')">+</button>
</div>

<!-- PHYSIQUE -->
<div class="matiere">
    <h3>Physique (coef 7)</h3>
    <div id="physique">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('physique')">+</button>
</div>

<!-- CHIMIE -->
<div class="matiere">
    <h3>Chimie (coef 4)</h3>
    <div id="chimie">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('chimie')">+</button>
</div>

<!-- BIOLOGIE -->
<div class="matiere">
    <h3>Biologie (coef 3)</h3>
    <div id="biologie">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('biologie')">+</button>
</div>

<!-- INFO -->
<div class="matiere">
    <h3>Info (coef 3)</h3>
    <div id="info">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('info')">+</button>
</div>

<!-- CULTURE G -->
<div class="matiere">
    <h3>Culture G (coef 1.5)</h3>
    <div id="cultureg">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('cultureg')">+</button>
</div>

<!-- LV2 -->
<div class="matiere">
    <h3>LV2 (coef 1.5)</h3>
    <div id="LV2">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('LV2')">+</button>
</div>

<!-- ANGLAIS -->
<div class="matiere">
    <h3>Anglais (coef 1.5)</h3>
    <div id="anglais">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('anglais')">+</button>
</div>

<!-- SPORT -->
<div class="matiere">
    <h3>Sport (coef 1.5)</h3>
    <div id="sport">
        <input type="number" min="0" max="20">
    </div>
    <button onclick="ajouterNote('sport')">+</button>
</div>

<button onclick="calculerMoyenne()">Calculer la moyenne générale</button>

<h2 id="resultat"></h2>

<script>
    // Ajout d'une nouvelle note seulement si la dernière est remplie
    function ajouterNote(matiereId) {
        let div = document.getElementById(matiereId);
        let inputs = div.querySelectorAll("input");
        let dernierInput = inputs[inputs.length - 1];

        if (dernierInput.value === "") {
            alert("Veuillez entrer la note avant d'en ajouter une autre.");
            return;
        }

        let input = document.createElement("input");
        input.type = "number";
        input.min = 0;
        input.max = 20;

        div.appendChild(document.createElement("br"));
        div.appendChild(input);
    }

    // Moyenne d'une matière classique
    function moyenneMatiere(matiereId) {
        let inputs = document.querySelectorAll(`#${matiereId} input`);
        let somme = 0;
        let count = 0;

        inputs.forEach(input => {
            let val = Number(input.value);
            if (!isNaN(val)) {
                somme += val;
                count++;
            }
        });

        return count > 0 ? somme / count : 0;
    }

    // Moyenne de Maths avec pondération Tests = 1/6 des Contrôles
    function moyenneMaths() {
        let moyenneControles = moyenneMatiere("maths-controles");
        let moyenneTests = moyenneMatiere("maths-tests");

        // Pondération : Tests = 1/6 des contrôles
        return (moyenneControles + (moyenneTests / 6)) / (1 + 1/6);
    }

    // Calcul de la moyenne générale
    function calculerMoyenne() {
        let moyenneGenerale = (
            7 * moyenneMaths() +
            7 * moyenneMatiere("physique") +
            4 * moyenneMatiere("chimie") +
            3 * moyenneMatiere("biologie") +
            3 * moyenneMatiere("info") +
            1.5 * moyenneMatiere("cultureg") +
            1.5 * moyenneMatiere("LV2") +
            1.5 * moyenneMatiere("anglais") +
            1.5 * moyenneMatiere("sport")
        ) / 30;

        document.getElementById("resultat").textContent =
            "Moyenne générale : " + moyenneGenerale.toFixed(2);
    }
</script>

</body>
</html>
